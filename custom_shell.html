<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=1, user-scalable=no" />
	<meta name="mobile-web-app-capable" content="yes" />
	<meta name="apple-mobile-web-app-capable" content="yes" />
	<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
	
	<!-- Force landscape orientation -->
	<meta name="screen-orientation" content="landscape" />
	<meta name="x5-orientation" content="landscape" />
	<meta name="full-screen" content="yes" />
	<meta name="x5-fullscreen" content="true" />
	
	<title>WIN WIN WIN</title>
	
	<style>
		html, body {
			margin: 0;
			padding: 0;
			width: 100%;
			height: 100%;
			overflow: hidden;
			background-color: #000;
			touch-action: none;
			-webkit-touch-callout: none;
			-webkit-user-select: none;
		}
		
		#canvas {
			display: block;
			margin: 0;
			color: white;
		}
		
		#canvas:focus {
			outline: none;
		}
		
		.godot {
			font-family: 'Noto Sans', 'Droid Sans', Arial, sans-serif;
			color: #e0e0e0;
			background-color: #3b3943;
			background-image: linear-gradient(to bottom, #403e48, #35333c);
			border: 1px solid #45434e;
			box-shadow: 0 0 1px 1px #2f2d35;
		}
	</style>
	
	$GODOT_HEAD_INCLUDE
</head>
<body>
	<canvas id="canvas">
		HTML5 canvas appears to be unsupported in the current browser.<br />
		Please try updating or use a different browser.
	</canvas>
	
	<script>
		// Aggressively unlock audio on mobile
		let audioUnlocked = false;
		let audioContext = null;
		
		function unlockAudio() {
			if (audioUnlocked) return;
			
			console.log('Attempting to unlock audio...');
			
			const AudioContext = window.AudioContext || window.webkitAudioContext;
			if (!AudioContext) {
				console.log('AudioContext not supported');
				return;
			}
			
			// Create audio context if needed
			if (!audioContext) {
				audioContext = new AudioContext();
				console.log('AudioContext created, state:', audioContext.state);
			}
			
			// Create and play silent buffer
			try {
				const buffer = audioContext.createBuffer(1, 1, 22050);
				const source = audioContext.createBufferSource();
				source.buffer = buffer;
				source.connect(audioContext.destination);
				source.start(0);
				
				// Resume if suspended
				if (audioContext.state === 'suspended') {
					audioContext.resume().then(() => {
						console.log('AudioContext resumed, state:', audioContext.state);
						audioUnlocked = true;
					});
				} else {
					console.log('Audio unlocked! State:', audioContext.state);
					audioUnlocked = true;
				}
			} catch (e) {
				console.error('Failed to unlock audio:', e);
			}
		}
		
		// Try immediately
		document.addEventListener('DOMContentLoaded', () => {
			unlockAudio();
		});
		
		// Also try on every possible user interaction
		const events = ['touchstart', 'touchend', 'mousedown', 'mouseup', 'click', 'keydown'];
		events.forEach(event => {
			document.addEventListener(event, unlockAudio, { passive: true });
		});
		
		// Try to lock orientation to landscape
		window.addEventListener('load', () => {
			if (screen.orientation && screen.orientation.lock) {
				screen.orientation.lock('landscape').catch(err => {
					console.log('Orientation lock not available:', err.message);
				});
			}
		});
	</script>
	
	$GODOT_BODY_INCLUDE
	
	<script src="$GODOT_URL"></script>
	<script>
		const GODOT_CONFIG = $GODOT_CONFIG;
		const engine = new Engine(GODOT_CONFIG);
		
		engine.startGame({
			'onExecute': (initializing) => {
				if (initializing) {
					console.log('Game initializing...');
				}
			}
		}).then(() => {
			console.log('Game started successfully');
		});
	</script>
</body>
</html>

